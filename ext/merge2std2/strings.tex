%!TEX root = P0896.tex

\rSec0[strings]{Strings library}

\setcounter{section}{3}
\rSec1[string.view]{String view classes}

\setcounter{subsection}{1}
\rSec2[string.view.template]{Class template \tcode{basic_string_view}}

\indexlibrary{\idxcode{basic_string_view}}%
\indexlibrarymember{traits_type}{basic_string_view}%
\indexlibrarymember{value_type}{basic_string_view}%
\indexlibrarymember{pointer}{basic_string_view}%
\indexlibrarymember{const_pointer}{basic_string_view}%
\indexlibrarymember{reference}{basic_string_view}%
\indexlibrarymember{const_reference}{basic_string_view}%
\indexlibrarymember{const_iterator}{basic_string_view}%
\indexlibrarymember{iterator}{basic_string_view}%
\indexlibrarymember{const_reverse_iterator}{basic_string_view}%
\indexlibrarymember{reverse_iterator}{basic_string_view}%
\indexlibrarymember{size_type}{basic_string_view}%
\indexlibrarymember{difference_type}{basic_string_view}%
\begin{codeblock}
template<class charT, class traits = char_traits<charT>>
class basic_string_view {
public:
  [...]

  // \ref{string.view.iterators}, iterator support
  constexpr const_iterator begin() const noexcept;
  constexpr const_iterator end() const noexcept;
  constexpr const_iterator cbegin() const noexcept;
  constexpr const_iterator cend() const noexcept;
  constexpr const_reverse_iterator rbegin() const noexcept;
  constexpr const_reverse_iterator rend() const noexcept;
  constexpr const_reverse_iterator crbegin() const noexcept;
  constexpr const_reverse_iterator crend() const noexcept;

  @\newtxt{friend constexpr const_iterator begin(basic_string_view sv) noexcept \{ return sv.begin(); \}}@
  @\newtxt{friend constexpr const_iterator end(basic_string_view sv) noexcept \{ return sv.end(); \}}@

  // \cxxref{string.view.capacity}, capacity
  constexpr size_type size() const noexcept;
  constexpr size_type length() const noexcept;
  constexpr size_type max_size() const noexcept;
  [[nodiscard]] constexpr bool empty() const noexcept;

  [...]
};
\end{codeblock}

\ednote{In the paragraph that specifies \tcode{const_iterator}, cross-reference
"contiguous iterator" to [iterator.concept.contiguous] instead of
[iterator.requirements.general]. (Is this too subtle a means to require
implementations to specialize \tcode{ranges::iterator_category}?)}

\setcounter{subsubsection}{1}
\rSec3[string.view.iterators]{Iterator support}
\begin{itemdecl}
using const_iterator = @\impdefx{type of \tcode{basic_string_view::const_iterator}}@;
\end{itemdecl}

\begin{itemdescr}
\pnum
A type that meets the requirements
of a constant random access iterator\iref{random.access.iterators} and
of a contiguous iterator\iref{iterator.concept.contiguous}
whose \tcode{value_type} is the template parameter \tcode{charT}.

\pnum [...]
\end{itemdescr}
